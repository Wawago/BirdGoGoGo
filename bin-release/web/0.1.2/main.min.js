var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),P2Space=function(){function t(){}return t.syncDisplay=function(e,i){if(void 0===i&&(i=""),e){var s=e.displays[0];if(s){var o=t.getEgretLoc(e,i);s.x=o[0],s.y=o[1],s.rotation=360-180*e.angle/Math.PI,i.length&&console.log(i+"的锚点",s.anchorOffsetX,s.anchorOffsetY)}}},t.syncDisplayForGroup=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.syncDisplay(s)}},t.extentEgret=function(t){return t*this.$factor},t.extentP2=function(t){return t/this.$factor},t.getP2Pos=function(t,e){return[t/this.$factor,e/this.$factor]},t.getEgretLoc=function(t,e){void 0===e&&(e="");var i=t.position[0],s=t.position[1];return e.length&&console.log("["+e+"]getEgretLoc:",i,s,"(p2->egret)",i*this.$factor,s*this.$factor),[i*this.$factor,s*this.$factor]},t.$factor=50,t}();__reflect(P2Space.prototype,"P2Space");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?s(o):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var GameData=function(){function t(){}return t.gameStartEvent="gameStart",t.gameRestartEvent="gameRestart",t.stageW=640,t.stageH=1136,t.isSoundOn=!0,t.isStart=!1,t.isPause=!0,t.score=0,t.highestScore=0,t}();__reflect(GameData.prototype,"GameData");var GameOverPanel=function(t){function e(){var e=t.call(this)||this;return e.restartButtonWidth=145,e.restartButtonHeight=108,e.initView(),e.initGUI(),e.updateGUI(),e}return __extends(e,t),e.prototype.initView=function(){this.anchorOffsetX=GameData.stageW/2,this.anchorOffsetY=GameData.stageH/2,this.width=GameData.stageW,this.height=GameData.stageH,this.graphics.beginFill(0,.5),this.graphics.drawRect(0,0,this.width,this.height),this.graphics.endFill()},e.prototype.initGUI=function(){this.scorePanel=Utils.createBitmapByName("gameover_panel_png"),this.scorePanel.anchorOffsetX=.5*this.scorePanel.width,this.scorePanel.x=this.width/2,this.scorePanel.y=270,this.addChild(this.scorePanel),this.currentScore=new egret.BitmapText,this.currentScore.font=GameData.fontRed,this.addChild(this.currentScore),this.highestScore=new egret.BitmapText,this.highestScore.font=GameData.fontGrey,this.highestScore.x=this.scorePanel.x+75,this.highestScore.y=this.scorePanel.y+this.scorePanel.height-63,this.addChild(this.highestScore),this.restartButton=new eui.Button,this.restartButton.width=this.restartButtonWidth,this.restartButton.height=this.restartButtonHeight,this.restartButton.x=this.width/2-this.restartButtonWidth/2,this.restartButton.y=this.scorePanel.y+this.scorePanel.height+40,this.restartButton.skinName="skins.RestartButtonSkin",this.addChild(this.restartButton),this.restartButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRestartButton,this),this.rankButton=new eui.Button,this.rankButton.width=this.restartButtonWidth,this.rankButton.height=this.restartButtonHeight,this.rankButton.x=this.restartButton.x-this.restartButtonWidth-30,this.rankButton.y=this.restartButton.y,this.rankButton.skinName="skins.RankButtonSmallSkin",this.addChild(this.rankButton),this.rankButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankButton,this),this.shareButton=new eui.Button,this.shareButton.width=this.restartButtonWidth,this.shareButton.height=this.restartButtonHeight,this.shareButton.x=this.restartButton.x+this.restartButtonWidth+30,this.shareButton.y=this.restartButton.y,this.shareButton.skinName="skins.ShareButtonSmallSkin",this.addChild(this.shareButton),this.shareButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareButton,this)},e.prototype.updateGUI=function(){this.currentScore.text=""+GameData.score,this.currentScore.anchorOffsetX=.5*this.currentScore.textWidth,this.currentScore.anchorOffsetY=.5*this.currentScore.textHeight,this.currentScore.x=this.scorePanel.x,this.currentScore.y=this.scorePanel.y+this.scorePanel.height/2+50,this.highestScore.text=""+GameData.highestScore},e.prototype.onRestartButton=function(){this.dispatchEventWith(GameData.gameRestartEvent)},e.prototype.onRankButton=function(){},e.prototype.onShareButton=function(){},e}(egret.Sprite);__reflect(GameOverPanel.prototype,"GameOverPanel");var GameView=function(t){function e(){var e=t.call(this)||this;return e.birdBodyRadius=38,e.gravity=25,e.birdJumpSpeed=-13,e.isPrepared=!1,e.isStart=!1,e.initView(),e.initSprites(),e.initContactMaterials(),e.initEvents(),e.initGUI(),e}return __extends(e,t),e.prototype.initView=function(){this.anchorOffsetX=GameData.stageW/2,this.anchorOffsetY=GameData.stageH/2,this.width=GameData.stageW,this.height=GameData.stageH;var t=Utils.createBitmapByName("background_png");t.width=GameData.stageW,t.height=GameData.stageH,this.addChild(t),this.world=new p2.World({gravity:[0,0]}),this.world.sleepMode=p2.World.BODY_SLEEPING,this.touchEnabled=!0},e.prototype.initSprites=function(){this.createBird(),this.createPipeGroups(),this.groundBody=PipeGroup.createBlock(this.world,this,0,GameData.stageH-PipeGroup.groundHeight,0,"ground_png")},e.prototype.initContactMaterials=function(){var t=new p2.Material(0),e=new p2.Material(1);this.birdBody.shapes[0].material=t,this.groundBody.shapes[0].material=e,this.pipeGroup1.upperPipe.shapes[0].material=e,this.pipeGroup1.lowerPipe.shapes[0].material=e,this.pipeGroup2.upperPipe.shapes[0].material=e,this.pipeGroup2.lowerPipe.shapes[0].material=e,this.pipeGroup3.upperPipe.shapes[0].material=e,this.pipeGroup3.lowerPipe.shapes[0].material=e;var i=new p2.ContactMaterial(t,e,{friction:100,stiffness:1e4,relaxation:1,frictionRelaxation:10});this.world.addContactMaterial(i)},e.prototype.initEvents=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchScreen,this)},e.prototype.onTouchScreen=function(){this.bird.isAlive&&(this.isPrepared||this.prepareGameStart(),this.isStart||this.gameStart(),this.birdBody.velocity[1]=this.birdJumpSpeed,this.bird.jump())},e.prototype.initGUI=function(){this.guide=Utils.createBitmapByName("guide_png"),this.guide.x=this.width/2-30,this.guide.y=400,this.addChild(this.guide);var t=Utils.createBitmapByName("scoreboard_png");t.anchorOffsetX=.5*t.width,t.x=this.width/2,t.y=0,this.addChild(t),this.scoreLabel=new egret.BitmapText,this.scoreLabel.scaleX=.5,this.scoreLabel.scaleY=.5,this.scoreLabel.font=GameData.fontRed,this.scoreLabel.x=this.width/2+20,this.scoreLabel.y=18,this.addChild(this.scoreLabel),this.updateScoreLabel(),this.soundButton=new eui.Button,this.soundButton.x=GameData.stageW-20-79,this.soundButton.y=20,this.soundButton.skinName="skins.SoundButtonSkin",this.soundButton.touchEnabled=!0,this.addChild(this.soundButton),this.updateSoundButton(),this.soundButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSoundButton,this)},e.prototype.onSoundButton=function(){GameData.isSoundOn=!GameData.isSoundOn,this.updateSoundButton()},e.prototype.updateSoundButton=function(){this.soundButton.currentState=GameData.isSoundOn?"on":"off"},e.prototype.createPipeGroups=function(){this.pipeGroup1=new PipeGroup(this.world,this),this.pipeGroup2=new PipeGroup(this.world,this),this.pipeGroup3=new PipeGroup(this.world,this)},e.prototype.createBird=function(){this.bird=new Bird,this.bird.x=GameData.stageW/3,this.bird.y=GameData.stageH/2,this.addChild(this.bird),this.birdBody=new p2.Body({mass:5,type:p2.Body.DYNAMIC,position:P2Space.getP2Pos(this.bird.x,this.bird.y),allowSleep:!1}),this.birdBody.angularDamping=.98;var t=new p2.Circle({radius:P2Space.extentP2(this.birdBodyRadius)});this.birdBody.addShape(t),this.world.addBody(this.birdBody),this.birdBody.displays=[this.bird]},e.prototype.onEnterFrame=function(){this.world.step(.06);var t=P2Space.getEgretLoc(this.groundBody);t[0]<=0&&(this.groundBody.position[0]=P2Space.extentP2(GameData.stageW)),this.pipeGroup1.updatePipePostions(),this.pipeGroup2.updatePipePostions(),this.pipeGroup3.updatePipePostions(),P2Space.syncDisplayForGroup(this.world.bodies),this.checkGetPoint(),this.checkCollision()},e.prototype.checkCollision=function(){this.bird.isAlive&&(this.birdBody.overlaps(this.groundBody)||this.pipeGroup1.collides(this.birdBody)||this.pipeGroup2.collides(this.birdBody)||this.pipeGroup3.collides(this.birdBody))&&this.gameOver()},e.prototype.checkGetPoint=function(){(this.pipeGroup1.checkGetPoint(this.birdBody)||this.pipeGroup2.checkGetPoint(this.birdBody)||this.pipeGroup3.checkGetPoint(this.birdBody))&&(GameData.score++,this.updateScoreLabel())},e.prototype.updateScoreLabel=function(){this.scoreLabel.text=""+GameData.score},e.prototype.gameStart=function(){this.isStart=!0,this.groundBody.velocity[0]=e.speedX,this.pipeGroup1.start(),this.pipeGroup2.start(),this.pipeGroup3.start(),this.world.gravity[1]=this.gravity},e.prototype.prepareGameStart=function(){this.guide&&this.guide.parent&&this.guide.parent.removeChild(this.guide),this.gameOverPanel&&this.gameOverPanel.parent&&this.gameOverPanel.parent.removeChild(this.gameOverPanel),this.world.gravity[1]=0,this.birdBody.position=P2Space.getP2Pos(GameData.stageW/3,GameData.stageH/2),this.birdBody.velocity=[0,0],this.birdBody.angle=0,this.birdBody.angularVelocity=0,this.bird.fly(),this.pipeGroup1.moveToX(GameData.stageW+PipeGroup.pipeWidth/2),this.pipeGroup2.moveToX(GameData.stageW+PipeGroup.pipeWidth/2+PipeGroup.pipeGapX),this.pipeGroup3.moveToX(GameData.stageW+PipeGroup.pipeWidth/2+2*PipeGroup.pipeGapX),GameData.score=0,this.updateScoreLabel(),this.isPrepared=!0},e.prototype.gameOver=function(){this.updateHighestScore(),this.isPrepared=!1,this.isStart=!1,this.groundBody.velocity[0]=0,this.pipeGroup1.stop(),this.pipeGroup2.stop(),this.pipeGroup3.stop(),this.bird.die(),ShakeUtils.getInstance().shakeObj(this,.5,10,8),egret.setTimeout(this.showGameOverPanel,this,500)},e.prototype.updateHighestScore=function(){GameData.score>GameData.highestScore&&(GameData.highestScore=GameData.score)},e.prototype.showGameOverPanel=function(){null==this.gameOverPanel&&(this.gameOverPanel=new GameOverPanel,this.gameOverPanel.x=this.width/2,this.gameOverPanel.y=this.height/2,this.gameOverPanel.addEventListener(GameData.gameRestartEvent,this.prepareGameStart,this)),this.addChild(this.gameOverPanel),this.gameOverPanel.updateGUI()},e.speedX=-2.5,e}(egret.Sprite);__reflect(GameView.prototype,"GameView");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=GameData.stageW,this.textField.textAlign="center",this.textField.y=GameData.stageH/2},e.prototype.setProgress=function(t,e){this.textField.text="读取中..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=t.call(this)||this;return e.isResourceLoaded=!1,e.isThemeLoaded=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.stage.registerImplementation("eui.IAssetAdapter",new AssetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),GameData.stageW=this.stage.stageWidth,GameData.stageH=this.stage.stageHeight,this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoaded=!0,this.createGameScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoaded=!0,this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){this.isThemeLoaded&&this.isResourceLoaded&&(this.startView=new StartView,this.startView.x=GameData.stageW/2,this.startView.y=GameData.stageH/2,this.addChild(this.startView),this.startView.addEventListener(GameData.gameStartEvent,this.onGameStart,this),this.changeViewCurtain=new egret.Shape,this.changeViewCurtain.graphics.beginFill(0,1),this.changeViewCurtain.graphics.drawRect(0,0,GameData.stageW,GameData.stageH),this.changeViewCurtain.graphics.endFill(),this.changeViewCurtain.alpha=0)},e.prototype.onGameStart=function(){this.startView.end(),this.addChild(this.changeViewCurtain),egret.Tween.get(this.changeViewCurtain).to({alpha:1},300).call(function(){this.removeChild(this.startView),this.startView.removeEventListener(GameData.gameStartEvent,this.onGameStart,this),this.startView=null,this.gameView=new GameView,this.gameView.x=GameData.stageW/2,this.gameView.y=GameData.stageH/2,this.addChildAt(this.gameView,0)},this).to({alpha:0},300).call(function(){this.removeChild(this.changeViewCurtain)},this)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var Bird=function(t){function e(){var e=t.call(this)||this;return e.sfxHit=RES.getRes("sfx_hit_mp3"),e.sfxJump=RES.getRes("sfx_jump_mp3"),e.isAlive=!0,e.initView(),e}return __extends(e,t),e.prototype.initView=function(){var t=RES.getRes("bird_json"),e=RES.getRes("bird_png"),i=new egret.MovieClipDataFactory(t,e);this.mc=new egret.MovieClip(i.generateMovieClipData("bird")),this.addChild(this.mc),this.anchorOffsetX=.5*this.mc.width,this.anchorOffsetY=.5*this.mc.height,this.fly()},e.prototype.fly=function(){this.isAlive=!0,this.mc.gotoAndPlay("fly",-1)},e.prototype.jump=function(){SoundUtils.playSfxOnTime(this.sfxJump)},e.prototype.die=function(){this.isAlive=!1,this.mc.gotoAndPlay("die",1),SoundUtils.playSfxOnTime(this.sfxHit)},e.prototype.dispose=function(){this.removeChildren()},e}(egret.Sprite);__reflect(Bird.prototype,"Bird");var PipeGroup=function(){function t(e,i){this.haveGotPoint=!1,this.sfxPoint=RES.getRes("sfx_point_mp3"),this.pipeRebornX=3*t.pipeGapX-t.pipeWidth/2,this.totalPipeLength=GameData.stageH-t.groundHeight-t.pipeGapY,this.createPipes(e,i)}return t.prototype.createPipes=function(e,i){var s=this.getRandomPipeHeight();this.upperPipe=t.createBlock(e,i,GameData.stageW,s-t.pipeHeight,0,"upper_pipe_png"),this.lowerPipe=t.createBlock(e,i,GameData.stageW,s+t.pipeGapY,0,"lower_pipe_png"),this.coin=this.createCoin(e,i,GameData.stageW,s+t.pipeGapY/2-42.5)},t.prototype.createCoin=function(t,e,i,s){var o=RES.getRes("coin_json"),n=RES.getRes("coin_png"),a=new egret.MovieClipDataFactory(o,n),r=new egret.MovieClip(a.generateMovieClipData("coin"));r.anchorOffsetX=.5*r.width,r.anchorOffsetY=.5*r.height,r.gotoAndPlay("spin",-1),e.addChild(r);var h=new p2.Body({mass:1,fixedRotation:!0,position:P2Space.getP2Pos(i+r.width/2,s+r.height/2),collisionResponse:!1,type:p2.Body.KINEMATIC}),p=new p2.Circle({radius:P2Space.extentP2(r.width/2)});return h.addShape(p),h.displays=[r],t.addBody(h),h},t.createBlock=function(t,e,i,s,o,n){var a=Utils.createBitmapByName(n);a.anchorOffsetX=.5*a.width,a.anchorOffsetY=.5*a.height,e.addChild(a);var r=new p2.Body({mass:1,fixedRotation:!0,position:P2Space.getP2Pos(i+a.width/2,s+a.height/2),type:p2.Body.KINEMATIC,velocity:[o,0]}),h=new p2.Box({width:P2Space.extentP2(a.width),height:P2Space.extentP2(a.height)});return r.addShape(h),r.displays=[a],t.addBody(r),r},t.prototype.updatePipePostions=function(){if(P2Space.extentEgret(this.upperPipe.position[0])<=-t.pipeWidth/2){var e=this.getRandomPipeHeight();this.moveToX(this.pipeRebornX),this.upperPipe.position[1]=P2Space.extentP2(e-.5*t.pipeHeight),this.lowerPipe.position[1]=P2Space.extentP2(e+t.pipeGapY+.5*t.pipeHeight),this.coin.position[1]=P2Space.extentP2(e+t.pipeGapY/2)}},t.prototype.moveToX=function(t){this.upperPipe.position[0]=P2Space.extentP2(t),this.lowerPipe.position[0]=P2Space.extentP2(t),this.coin.position[0]=P2Space.extentP2(t),this.coin.displays[0].visible=!0,this.haveGotPoint=!1},t.prototype.getRandomPipeHeight=function(){return Math.floor((this.totalPipeLength-2*t.minPipeHeight)*Math.random()+t.minPipeHeight)},t.prototype.stop=function(){this.upperPipe.velocity[0]=0,this.lowerPipe.velocity[0]=0,this.coin.velocity[0]=0},t.prototype.start=function(){this.upperPipe.velocity[0]=GameView.speedX,this.lowerPipe.velocity[0]=GameView.speedX,this.coin.velocity[0]=GameView.speedX},t.prototype.collides=function(t){return t.overlaps(this.upperPipe)||t.overlaps(this.lowerPipe)},t.prototype.checkGetPoint=function(t){return this.coin.overlaps(t)&&!this.haveGotPoint?(this.haveGotPoint=!0,this.coin.displays[0].visible=!1,SoundUtils.playSfxOnTime(this.sfxPoint),!0):!1},t.groundHeight=210,t.pipeHeight=753,t.pipeWidth=142,t.pipeGapX=400,t.pipeGapY=280,t.minPipeHeight=130,t}();__reflect(PipeGroup.prototype,"PipeGroup");var ShakeUtils=function(){function t(){this.count=0,this.timer=new egret.Timer(1e3)}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.shakeObj=function(t,e,i,s){this.target=t,this.initX=t.x,this.initY=t.y,this.maxDis=s,this.count=e*i,this.rate=i,this.timer.delay=1e3/i,this.timer.repeatCount=this.count,this.timer.addEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.reset(),this.timer.start()},t.prototype.shaking=function(){egret.Tween.removeTweens(this.target),this.target.x=this.initX-this.maxDis+Math.random()*this.maxDis*2,this.target.y=this.initY-this.maxDis+Math.random()*this.maxDis*2,egret.Tween.get(this.target).to({x:this.initX,y:this.initY},999/this.rate)},t.prototype.shakeComplete=function(){this.target&&(egret.Tween.removeTweens(this.target),this.target.x=this.initX,this.target.y=this.initY),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this)},t.prototype.stop=function(){this.shakeComplete()},t}();__reflect(ShakeUtils.prototype,"ShakeUtils");var SoundUtils=function(){function t(){}return t.playSfxOnTime=function(t){GameData.isSoundOn&&t.play(0,1)},t}();__reflect(SoundUtils.prototype,"SoundUtils");var StartView=function(t){function e(){var e=t.call(this)||this;return e.logoPosY=120,e.startButtonWidth=282,e.startButtonHeight=103,e.soundButtonWidth=79,e.rankButtonWidth=192,e.initView(),e.initGUI(),e}return __extends(e,t),e.prototype.initView=function(){this.anchorOffsetX=GameData.stageW/2,this.anchorOffsetY=GameData.stageH/2,this.width=GameData.stageW,this.height=GameData.stageH;var t=Utils.createBitmapByName("background_png");t.width=GameData.stageW,t.height=GameData.stageH,this.addChild(t),this.touchEnabled=!0},e.prototype.initGUI=function(){this.logo=Utils.createBitmapByName("logo_png"),this.logo.anchorOffsetX=.5*this.logo.width,this.logo.x=GameData.stageW/2,this.logo.y=this.logoPosY,this.addChild(this.logo),this.bird=new Bird,this.bird.x=GameData.stageW/2,this.bird.y=this.logo.y+this.logo.height+80,this.addChild(this.bird),this.startButton=new eui.Button,this.startButton.x=.5*GameData.stageW-this.startButtonWidth/2,this.startButton.y=.5*GameData.stageH-this.startButtonHeight/2+20,this.startButton.skinName="skins.StartButtonSkin",this.addChild(this.startButton),this.startButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartButton,this),this.rankButton=new eui.Button,this.rankButton.x=.5*GameData.stageW-this.rankButtonWidth-20,this.rankButton.y=this.startButton.y+this.startButtonHeight+35,this.rankButton.skinName="skins.RankButtonSkin",this.addChild(this.rankButton),this.rankButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankButton,this),this.shareButton=new eui.Button,this.shareButton.x=.5*GameData.stageW+20,this.shareButton.y=this.rankButton.y,this.shareButton.skinName="skins.ShareButtonSkin",this.addChild(this.shareButton),this.shareButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareButton,this),this.soundButton=new eui.Button,this.soundButton.x=GameData.stageW-20-this.soundButtonWidth,this.soundButton.y=20,this.soundButton.skinName="skins.SoundButtonSkin",this.addChild(this.soundButton),this.updateSoundButton(),this.soundButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSoundButton,this),this.ground=Utils.createBitmapByName("ground_png"),this.ground.anchorOffsetX=.5*this.ground.width,this.ground.anchorOffsetY=.5*this.ground.height,this.ground.x=GameData.stageW,this.ground.y=GameData.stageH-.5*this.ground.height,this.addChild(this.ground),egret.Tween.get(this.ground,{loop:!0}).to({x:0},5e3).call(this.onGroundComplete,this),GameData.fontRed=RES.getRes("font_red_fnt"),GameData.fontGrey=RES.getRes("font_grey_fnt")},e.prototype.onGroundComplete=function(){this.ground.x=GameData.stageW},e.prototype.onStartButton=function(){this.dispatchEventWith(GameData.gameStartEvent)},e.prototype.onRankButton=function(){},e.prototype.onShareButton=function(){},e.prototype.onSoundButton=function(){GameData.isSoundOn=!GameData.isSoundOn,this.updateSoundButton()},e.prototype.updateSoundButton=function(){this.soundButton.currentState=GameData.isSoundOn?"on":"off"},e.prototype.end=function(){this.startButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartButton,this),this.rankButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankButton,this),this.shareButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareButton,this),this.soundButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSoundButton,this)},e}(egret.Sprite);__reflect(StartView.prototype,"StartView");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,s){function o(t){e.call(s,t)}function n(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Utils=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t}();__reflect(Utils.prototype,"Utils");